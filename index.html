<!DOCTYPE html>
<html>
<head>
  <title>ariExtra: It’s like ari, but … extra</title>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="generator" content="pandoc" />




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <base target="_blank">

  <script type="text/javascript">
    var SLIDE_CONFIG = {
      // Slide settings
      settings: {
                title: 'ariExtra: It’s like ari, but … extra',
                        subtitle: 'source at <a href="https://github.com/muschellij2/ariExtra_talk" class="uri">https://github.com/muschellij2/ariExtra_talk</a>',
                useBuilds: true,
        usePrettify: true,
        enableSlideAreas: true,
        enableTouch: true,
                        favIcon: 'bloomberg.logo.small.horizontal.blue.png',
              },

      // Author information
      presenters: [
            {
        name:  'John Muschelli, slides at <a href="http://johnmuschelli.com/ariExtra_talk" class="uri">http://johnmuschelli.com/ariExtra_talk</a>' ,
        company: '',
        gplus: '',
        twitter: '',
        www: '',
        github: ''
      },
            ]
    };
  </script>

  <link href="index_files/ioslides-13.5.1/fonts/fonts.css" rel="stylesheet" />
  <link href="index_files/ioslides-13.5.1/theme/css/default.css" rel="stylesheet" />
  <link href="index_files/ioslides-13.5.1/theme/css/phone.css" rel="stylesheet" />
  <script src="index_files/ioslides-13.5.1/js/modernizr.custom.45394.js"></script>
  <script src="index_files/ioslides-13.5.1/js/prettify/prettify.js"></script>
  <script src="index_files/ioslides-13.5.1/js/prettify/lang-r.js"></script>
  <script src="index_files/ioslides-13.5.1/js/prettify/lang-yaml.js"></script>
  <script src="index_files/ioslides-13.5.1/js/hammer.js"></script>
  <script src="index_files/ioslides-13.5.1/js/slide-controller.js"></script>
  <script src="index_files/ioslides-13.5.1/js/slide-deck.js"></script>

  <style type="text/css">

    b, strong {
      font-weight: bold;
    }

    em {
      font-style: italic;
    }

    summary {
      display: list-item;
    }

    slides > slide {
      -webkit-transition: all 0.4s ease-in-out;
      -moz-transition: all 0.4s ease-in-out;
      -o-transition: all 0.4s ease-in-out;
      transition: all 0.4s ease-in-out;
    }

    .auto-fadein {
      -webkit-transition: opacity 0.6s ease-in;
      -webkit-transition-delay: 0.4s;
      -moz-transition: opacity 0.6s ease-in 0.4s;
      -o-transition: opacity 0.6s ease-in 0.4s;
      transition: opacity 0.6s ease-in 0.4s;
      opacity: 0;
    }
/* https://github.com/ropensci/plotly/pull/524#issuecomment-468142578 */
slide:not(.current) .plotly.html-widget{
  display: block;
}

    slides > slide:not(.nobackground):before {
      font-size: 12pt;
      content: "";
      position: absolute;
      bottom: 20px;
      left: 60px;
      background: url(bloomberg.logo.small.horizontal.blue.png) no-repeat 0 50%;
      -webkit-background-size: 30px 30px;
      -moz-background-size: 30px 30px;
      -o-background-size: 30px 30px;
      background-size: 30px 30px;
      padding-left: 40px;
      height: 30px;
      line-height: 1.9;
    }
  </style>

  <link rel="stylesheet" href="neuroconductor.css" type="text/css" />

</head>

<body style="opacity: 0">

<slides class="layout-widescreen">

  <slide class="title-slide segue nobackground">
        <aside class="gdbar"><img src="bloomberg.logo.small.horizontal.blue.png"></aside>
        <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
    <hgroup class="auto-fadein">
      <h1 data-config-title><!-- populated from slide_config.json --></h1>
      <h2 data-config-subtitle><!-- populated from slide_config.json --></h2>
      <p data-config-presenter><!-- populated from slide_config.json --></p>
          </hgroup>
  </slide>

<style type="text/css">
article {
  font-size: 28pt;
}
</style>

<slide class=""><hgroup><h2>Overall Goals of the Project</h2></hgroup><article  id="overall-goals-of-the-project">

<ul>
<li>Make reproducible videos</li>
<li>Provide users flexibility of what Services (Google/Amazon) they want to use</li>
<li><p>Translate video into another language</p></li>
<li><p><code>ari</code> creates reproducible videos, but …</p></li>
</ul>

<!-- SMI 2019 product -->

</article></slide><slide class="segue dark nobackground level1"><hgroup class = 'auto-fadein'><h2>Goal: Harmonize all inputs to <code>ari</code></h2></hgroup><article  id="goal-harmonize-all-inputs-to-ari">

</article></slide><slide class=""><hgroup><h2>Workflow of <code>ari</code></h2></hgroup><article  id="workflow-of-ari">

<p><img src="figure/ari_workflow.png" width="100%" /></p>

</article></slide><slide class=""><hgroup><h2>Workflow of <code>ari</code> - functions</h2></hgroup><article  id="workflow-of-ari---functions">

<ul>
<li>Images with a audio → <code>ari_stitch</code></li>
<li>Rmd document with HTML comments → Images with a text script (<code>ari_narrate</code>)</li>
<li>Images with a text script → <code>ari_spin</code></li>
</ul>

</article></slide><slide class=""><hgroup><h2>Workflow of <code>ari</code>: Version 1.0</h2></hgroup><article  id="workflow-of-ari-version-1.0">

<div id="left_col">
<ul>
<li>Synthesize audio through Amazon Polly</li>
<li>Do checks with length of images and audio/text</li>
<li>Set a whole bunch of <code>ffmpeg</code> flags and run <code>ffmpeg</code> through <code>system</code></li>
<li>Audio + Images → <code>ffmpeg</code> → mp4</li>
</ul></div>

<div id="right_col">
<p>Example of checks</p>

<p><img src="figure/grandma_stitch.jpg" width="100%" /></p></div>

</article></slide><slide class=""><hgroup><h2>Workflow of <code>ari</code>: Version 2.0</h2></hgroup><article  id="workflow-of-ari-version-2.0">

<ul>
<li>Text script → audio (through <code>text2speech</code> package)</li>
<li>Synthesize audio through <code>text2speech</code> package</li>
<li>Use <code>ariExtra</code> to unify the output format to use one <code>ari</code> function</li>
<li>Create an <code>ffmpeg</code> package (short term, not done) and pass to that</li>
<li>Pass images and such through <code>av</code> package (long term)</li>
</ul>

</article></slide><slide class="segue dark nobackground level1"><hgroup class = 'auto-fadein'><h2><code>text2speech</code>: Harmonizing Text to Speech Packages</h2></hgroup><article  id="text2speech-harmonizing-text-to-speech-packages">

</article></slide><slide class=""><hgroup><h2>Text to Speech</h2></hgroup><article  id="text-to-speech">

<div id="left_col">
<ul>
<li><code>googleLanguageR</code> - Google Cloud Services</li>
<li><code>aws.polly</code> - Amazon Polly</li>
<li><code>mscstts</code> - Microsoft Text-to-Speech or Bing Speech (my package)</li>
</ul></div>

<div id="right_col">
<p><code>text2speech</code> <img src="figure/rule_them_all.gif" width="100%" /></p></div>

</article></slide><slide class=""><hgroup><h2>Text to Speech: <code>knitr</code> Enginge</h2></hgroup><article  id="text-to-speech-knitr-enginge">

<p>Add this to the header</p>

<pre class = 'prettyprint lang-markdown'>```{r}
knitr::knit_engines$set(speak = text2speech::tts_speak_engine)
```</pre>

<p>Then have a code chunk like:</p>

<pre class = 'prettyprint lang-markdown'>```{speak, service = &quot;amazon&quot;, voice = &quot;Joanna&quot;}
Here are a bunch of words to say stuff
```</pre>

</article></slide><slide class=""><hgroup><h2>Text to Speech Example</h2></hgroup><article  id="text-to-speech-example">

<p>Amazon</p>

<audio controls>

<source src="index_files/amazon.mp3">

</audio>

<p>Google</p>

<audio controls>

<source src="index_files/google.mp3">

</audio>

<p>Microsoft</p>

<audio controls>

<source src="index_files/microsoft.mp3">

</audio>

</article></slide><slide class=""><hgroup><h2>Workflow of <code>ariExtra</code></h2></hgroup><article  id="workflow-of-ariextra">

<ul>
<li>PPTX with notes → <code>pptx_to_ari</code></li>
<li>Google Slides with notes → <code>gs_to_ari</code></li>
<li><code>ioslides</code> Rmd with comments → <code>rmd_to_ari</code></li>
<li><code>xaringan</code> Rmd with comments → <code>rmd_to_ari</code></li>
<li><p>PDF + text → <code>pdf_to_ari</code></p></li>
<li><p>All <code>*_to_ari</code> functions → <code>make_ari_document</code> → PNGs + comments in MD</p></li>
</ul>

</article></slide><slide class=""><hgroup><h2>Google Slides Example</h2></hgroup><article  id="google-slides-example">

<p><a href='https://docs.google.com/presentation/d/1Opt6lv7rRi7Kzb9bI0u3SWX1pSz1k7botaphTuFYgNs/edit#slide=id.p' title=''>https://docs.google.com/presentation/d/1Opt6lv7rRi7Kzb9bI0u3SWX1pSz1k7botaphTuFYgNs/edit#slide=id.p</a></p>

<p><img src="figure/gs_snap.png" width="80%" /></p>

</article></slide><slide class=""><hgroup><h2>Google Slides Example</h2></hgroup><article  id="google-slides-example-1">

<pre class = 'prettyprint lang-r'>id = get_slide_id(
  paste(
    &quot;https://docs.google.com/presentation/d&quot;,
    &quot;1Opt6lv7rRi7Kzb9bI0u3SWX1pSz1k7botaphTuFYgNs&quot;, 
    &quot;edit#slide=id.p&quot;, sep = &quot;/&quot;))
id</pre>

<pre >[1] &quot;1Opt6lv7rRi7Kzb9bI0u3SWX1pSz1k7botaphTuFYgNs&quot;</pre>

</article></slide><slide class=""><hgroup><h2>Google Slides Example</h2></hgroup><article  id="google-slides-example-2">

<pre class = 'prettyprint lang-r'>result = gs_to_ari(id, verbose = FALSE); xx = readLines(result$output_file)[1:15]
names(result); </pre>

<pre >[1] &quot;output_file&quot;     &quot;original_images&quot; &quot;images&quot;          &quot;script&quot;         
[5] &quot;use_knitr&quot;      </pre>

<pre class = 'prettyprint lang-r'>head(result$script, 2)</pre>

<pre >[1] &quot;Lean pub created a mook platform.  We want to discuss some options for creating courses with Lean pub at Johns Hopkins.&quot;                    
[2] &quot;Here is an example of the way Lean pub turns text into an output course.  The left hand side is written in a markdown format called Markua.&quot;</pre>

<pre class = 'prettyprint lang-r'>head(result$images, 2)</pre>

<pre >[1] &quot;/private/var/folders/1s/wrtqcpxn685_zk570bnx9_rr0000gr/T/RtmpjclHRr/filee22763909e20_files/slide_1.png&quot;
[2] &quot;/private/var/folders/1s/wrtqcpxn685_zk570bnx9_rr0000gr/T/RtmpjclHRr/filee22763909e20_files/slide_2.png&quot;</pre>

</article></slide><slide class=""><hgroup><h2>Google Slides Example</h2></hgroup><article  id="google-slides-example-3">

<pre class = 'prettyprint lang-r'>cat(xx, sep = &quot;\n&quot;)</pre>

<pre >---
output:
  ariExtra::ari_document:
    verbose: no
---


----------

&lt;!--Lean pub created a mook platform.  We want to discuss some options for creating courses with Lean pub at Johns Hopkins.--&gt;
![](/private/var/folders/1s/wrtqcpxn685_zk570bnx9_rr0000gr/T/RtmpjclHRr/filee2274826f683.png)


----------</pre>

</article></slide><slide class=""><hgroup><h2>Output (currently)</h2></hgroup><article  id="output-currently">

<ul>
<li>Markdown file with comments in HTML (md so <code>knitr</code> not run)</li>
<li>Can hit <code>Knit</code> in RStudio</li>
<li>Images converted to PNGs</li>
</ul>

</article></slide><slide class="segue dark nobackground level1"><hgroup class = 'auto-fadein'><h2>Live Demo</h2></hgroup><article  id="live-demo">

</article></slide><slide class=""><hgroup><h2>What you need for <code>ari</code></h2></hgroup><article  id="what-you-need-for-ari">

<ul>
<li><code>ffmpeg</code> installed ( <a href='https://gist.github.com/muschellij2/3de4563dfc615e412f2e5c7a4eb039d5' title=''><code>brew install ffmpeg</code></a> )</li>
<li>API key to <strong>Google</strong>/Amazon/Microsoft Text-to-Speech APIs

<ul>
<li>Authorization Howto: <a href='https://github.com/ropensci/googleLanguageR#authentication' title=''>https://github.com/ropensci/googleLanguageR#authentication</a></li>
<li>gets a JSON file, in <code>.Renviron</code>:</li>
</ul></li>
</ul>

<pre class = 'prettyprint lang-bash'>GL_AUTH=location_of_json_file.json</pre>

</article></slide><slide class=""><hgroup><h2>Catches in <code>ariExtra</code></h2></hgroup><article  id="catches-in-ariextra">

<ul>
<li>PDF to PNG requires <code>pdftools</code> which requies <code>libpoppler</code>/<code>poppler</code> install</li>
<li>PPTX to PDF requires <code>LibreOffice</code></li>
<li>Google Slides - needs to be shared</li>
</ul>

<p><img src="figure/share.png" width="60%" /></p>

</article></slide><slide class="segue dark nobackground level1"><hgroup class = 'auto-fadein'><h2><a href='https://jhubiostatistics.shinyapps.io/presentation_to_video/' title=''>Shiny Application</a></h2></hgroup><article  id="shiny-application">

</article></slide><slide class=""><hgroup><h2>Overall Goals of the Project</h2></hgroup><article  id="overall-goals-of-the-project-1">

<ul>
<li>Make reproducible videos ✓</li>
<li>Provide users flexibility with Services ✓</li>
<li>Translate video into another language X</li>
</ul>

</article></slide><slide class=""><hgroup><h2>Overall Goals of the Project</h2></hgroup><article  id="overall-goals-of-the-project-2">

<ul>
<li>Make reproducible videos ✓</li>
<li>Provide users flexibility with Services ✓</li>
<li>Translate <strong>audio</strong> into another language ✓

<ul>
<li><code>didactr::copy_and_translate_slide()</code></li>
<li>Want to be able to translate any (accessible) text as well</li>
</ul></li>
</ul>

</article></slide><slide class=""><hgroup><h2>Difficult issue: Authentication (translation)</h2></hgroup><article  id="difficult-issue-authentication-translation">

</article></slide><slide class=""><hgroup><h2>Translating slides</h2></hgroup><article  id="translating-slides">

<ul>
<li>Translating text <strong>inside slides</strong> requires:</li>
</ul>

<ol>
<li>OAuth using Google - need to be able to copy and edit the slide deck</li>
<li>Google Translation API enabling (can still use JSON from above)</li>
</ol>

<ul>
<li>Could be one API key for both, enabling all APIs (Slides + Translation)</li>
</ul>

</article></slide><slide class=""><hgroup><h2>Biggest issue with Authentication</h2></hgroup><article  id="biggest-issue-with-authentication">

<ul>
<li><p>OAuth - can edit slides and extract things w/o the &ldquo;Share button&rdquo;</p></li>
<li>Cannot authenticate via OAuth for Google Cloud services

<ul>
<li>Text to Speech</li>
<li>Translate</li>
</ul></li>
</ul>

</article></slide><slide class=""><hgroup><h2>Open Issues</h2></hgroup><article  id="open-issues">

<ul>
<li>Dictionary of our &ldquo;change words&rdquo; RStudio to R studio - needs to be incorporated</li>
<li>Translation requires API authorization</li>
<li>Can we create a better output format (<code>tibble</code>-like)?</li>
<li>Slides with no audio? Allowed? Why?</li>
<li><code>ffmpeg</code> to <code>av</code> package - <code>av</code> doesn’t have all quirks fixed</li>
<li>Is output format right? md vs. Rmd</li>
</ul>

</article></slide><slide class=""><hgroup><h2>Next Project steps</h2></hgroup><article  id="next-project-steps">

<ul>
<li>Adapt <code>didactr</code> with new <code>gargle</code> workflow</li>
<li>Get MOOC app authenticated (so no warning page)</li>
<li>Streamline the translation so it translates notes (done as of 3AM)

<ul>
<li>need to figure out how to escape/protect certain words (i.e. code or jargon)</li>
</ul></li>
</ul></article></slide>


  <slide class="backdrop"></slide>

</slides>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

<!-- map slide visiblity events into shiny -->
<script>
  (function() {
    if (window.jQuery) {
       window.jQuery(document).on('slideleave', function(e) {
         window.jQuery(e.target).trigger('hidden');
      });
       window.jQuery(document).on('slideenter', function(e) {
         window.jQuery(e.target).trigger('shown');
      });
    }
  })();
</script>

</body>
</html>
